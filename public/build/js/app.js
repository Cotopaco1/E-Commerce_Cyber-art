let montoTotal=0;const carritoDeCompra=[],usuario={id:1,nombre:"sergio silva"},datos={carritoDeCompra:{},usuario:{}},path=window.location.pathname;function iniciarApp(){eventoInputs(),eventoMenu(),agregarFixed(),subrayarPaginaActual(),eventoCarritoUserBoton(),"/"===path&&(eventoCuadros(),consultarApiCuadros()),"/carrito_de_compras"===path&&crearOpcionesEnSelected()}function crearOpcionesEnSelected(){const e=document.querySelector("#departamento");getDepartamentosColombia().then((t=>{t.forEach((t=>{const a=document.createElement("OPTION");a.textContent=t.name,a.value=t.name,a.dataset.departamentoId=t.id,e.appendChild(a)}))})),e.addEventListener("change",eventoSelect)}function eventoSelect(e){get_ciudades_de_un_departamento(e.target.options[e.target.selectedIndex].attributes["data-departamento-id"].value).then((e=>{crear_options_de_ciudad(e),console.log(e)}))}function crear_options_de_ciudad(e){const t=document.querySelector("#ciudad");e.forEach((e=>{const a=document.createElement("OPTION");a.textContent=e.name,a.value=e.name,a.dataset.ciudadId=e.id,t.appendChild(a)})),t.removeAttribute("disabled")}async function get_ciudades_de_un_departamento(e){try{const t=`https://api-colombia.com/api/v1/Department/${e}/cities`,a=await fetch(t);return await a.json()}catch(e){console.log(e)}}document.addEventListener("DOMContentLoaded",(function(){iniciarApp()}));let departamentos={};async function getDepartamentosColombia(){try{const e="https://api-colombia.com/api/v1/Department",t=await fetch(e);return await t.json()}catch(e){console.log(e)}}async function enviarDatos(){try{const e=getFechaActualFormateada(),t={carritoDeCompra:carritoDeCompra,userData:{usuarioID:usuario.id},fecha:e,status:"pendiente",monto_total:montoTotal},a="http://localhost:3000/api/cuadros";jsonData=JSON.stringify(t);const o={method:"POST",body:jsonData},r=await fetch(a,o);(await r.json()).resultado&&Swal.fire({icon:"success",title:"Pedido creado",text:"El pedido ha sido guardado con exito",button:"OK"}).then((()=>{window.location.reload()}))}catch(e){Swal.fire({icon:"error",title:"Ha habido un error",text:"El pedido no se ha podido crear.."})}}function getFechaActualFormateada(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`}async function consultarApiCuadros(){try{const e="http://localhost:3000/api/cuadros",t=await fetch(e);imprimirResultadosApi(await t.json())}catch(e){console.log(e)}}function imprimirResultadosApi(e){e.forEach((e=>{const{descripcion:t,disponible:a,id:o,imagen:r,nombre:n,precio:c,size:i}=e,d=document.getElementById("cuadros"),l=document.createElement("DIV");l.classList.add("cuadro");const s=document.createElement("DIV");s.classList.add("imagenCuadroDiv"),s.style.backgroundImage=`url(/img/${r})`;const u=document.createElement("DIV");u.classList.add("cuadro-info"),u.dataset.idCuadro=o;const m=document.createElement("P");m.classList.add("nombre-cuadro"),m.textContent=n;const p=document.createElement("P");p.classList.add("precio-cuadro"),p.textContent=c,u.appendChild(m),u.appendChild(p),crearBotonComprarActual(u,e),s.appendChild(u),l.appendChild(s),d.appendChild(l)}))}function eventoCuadros(){cuadros=document.querySelectorAll(".imagenCuadroDiv"),cuadros.forEach((e=>{e.addEventListener("mouseenter",crearBotonComprar),e.addEventListener("mouseleave",eliminarBotonComprar)}))}function crearBotonComprarActual(e,t){const a=document.createElement("DIV"),o=document.createElement("BUTTON");o.classList.add("boton"),o.textContent="Agregar al carrito",a.appendChild(o),e.appendChild(a),o.addEventListener("click",(function(){agregarAlCarrito(t)}))}function agregarAlCarrito(e){if("cantidad"in e){const{id:t}=e;let a;carritoDeCompra.forEach((e=>{t===e.id&&(a=e)}));const o=carritoDeCompra.indexOf(a);carritoDeCompra[o].cantidad=carritoDeCompra[o].cantidad+1}else e.cantidad=1,carritoDeCompra.push(e);actualizarInterfazCarritoCompra()}function removeInterfazDinamico(e,t){t.remove(),e.target.removeEventListener("click",removeInterfaz)}function eventoCarritoUserBoton(){const e=document.querySelector(".carritoCompra"),t=document.querySelector(".userBoton");e.addEventListener("click",mostrarInterfazCarritoCompras),t.addEventListener("click",mostrarInterfazCarritoCompras)}function mostrarInterfazCarritoCompras(){actualizarInterfazCarritoCompra();const e=document.querySelector(".modalCarrito"),t=document.querySelector("#carritoDeCompras");e.appendChild(t),esconderScroll()}function actualizarInterfazCarritoCompra(){const e=document.querySelector(".modalCarrito");e&&e.remove(),crearModal();const t=document.querySelector(".contenedorCarritoCompras");if(!carritoDeCompra.length>=1){const e=document.createElement("P");return e.classList.add("parrafoCarritoVacio"),e.textContent="El carrito esta vacio ...",void t.appendChild(e)}for(;t.firstChild;)t.removeChild(t.firstChild);carritoDeCompra.forEach((e=>{const{id:a,nombre:o,precio:r,descripcion:n,size:c,disponible:i,imagen:d,cantidad:l}=e,s=document.createElement("DIV");s.classList.add("interfazCampo");const u=document.createElement("P");u.textContent=o,u.classList.add("nombre-producto");const m=document.createElement("P");m.textContent=r,m.classList.add("precio-producto");const p=document.createElement("P");p.textContent=`Cantidad: ${l}`;const C=document.createElement("BUTTON");C.classList.add("botonChico"),C.textContent="+",C.addEventListener("click",(function(){agregarCantidad(e)}));const f=document.createElement("BUTTON");f.classList.add("botonChicoRojo"),f.textContent="-",f.addEventListener("click",(function(){restarCantidad(e)}));const h=document.createElement("DIV");h.classList.add("infoProductoCarrito"),h.appendChild(u),h.appendChild(m),h.appendChild(p),h.appendChild(C),h.appendChild(f),crearBotonBorrar(h,a,e);const g=document.createElement("IMG");g.src=`/img/${d}`,s.appendChild(h),s.appendChild(g),t.appendChild(s)}));const a=document.createElement("P");a.classList.add("parrafoMontoTotal"),montoTotal=sumarProductosCarrito(),a.textContent=`Monto Total: $${montoTotal.toLocaleString()} pesos Colombianos`,t.appendChild(a);const o=document.createElement("BUTTON");o.classList.add("botonComprar"),o.textContent="Comprar",o.addEventListener("click",enviarDatos),t.appendChild(o)}function sumarProductosCarrito(){let e=0;return carritoDeCompra.forEach((t=>{let a=parseInt(t.precio)*t.cantidad;e+=a})),e}function agregarCantidad(e){const t=carritoDeCompra.indexOf(e);carritoDeCompra[t].cantidad++,actualizarInterfazCarritoCompra()}function restarCantidad(e){const t=carritoDeCompra.indexOf(e);carritoDeCompra[t].cantidad--,carritoDeCompra[t].cantidad<1&&borrarProductoDeCarritoDeCompra(e.id,e),actualizarInterfazCarritoCompra()}function crearModal(){esconderScroll();const e=document.createElement("DIV");e.classList.add("modal","modalCarrito"),ocultarHeader(),e.addEventListener("click",ocultarModal);const t=document.querySelector("body"),a=document.createElement("DIV");a.id="carritoDeCompras",a.innerHTML='\n    <div class="contenedorCarritoCompras"></div>\n    ',e.appendChild(a),t.appendChild(e)}function crearBotonBorrar(e,t,a){const o=document.createElement("BUTTON");o.classList.add("botonBorrar"),o.textContent="Elimina el producto",e.appendChild(o),o.addEventListener("click",(function(){carritoDeCompra.forEach((e=>{if(e.id===t){const t=carritoDeCompra.indexOf(e);carritoDeCompra.splice(t,1),delete a.cantidad,actualizarInterfazCarritoCompra()}}))}))}function borrarProductoDeCarritoDeCompra(e,t){carritoDeCompra.forEach((a=>{if(a.id===e){const e=carritoDeCompra.indexOf(a);carritoDeCompra.splice(e,1),delete t.cantidad,actualizarInterfazCarritoCompra()}}))}function ocultarModal(e){const t=document.querySelector(".modalCarrito");eventClass=e.target.closest(".contenedorCarritoCompras"),eventClass||(mostrarScroll(),t.remove(),mostrarHeader())}function mostrarScroll(){document.querySelector("body").style.overflowY="scroll"}function esconderScroll(){document.querySelector("body").style.overflowY="hidden"}function eventoMenu(){menu=document.querySelector(".hamburgerMenu"),menu.addEventListener("click",(function(){mostrarModal()}))}function mostrarModal(){ocultarHeader(),botonCerrar=document.querySelector(".icono"),modal=document.querySelector(".modal"),modal.classList.remove("ocultar"),modal.addEventListener("click",ocultarModalAndMostrarHeader)}function ocultarModalAndMostrarHeader(e){eventClass=e.target.closest(".menu"),eventClass||(modal.classList.add("ocultar"),mostrarHeader(),modal.removeEventListener("click",ocultarModalAndMostrarHeader))}function subrayarPaginaActual(){paginaActual=obtenerPaginaActual(),menuCampos=document.querySelectorAll(".menuCampo a"),menuCampos.forEach((e=>{e.attributes.href.value===paginaActual&&e.classList.add("subrayarAmarillo")}))}function obtenerPaginaActual(){return window.location.pathname}function ocultarHeader(){header=document.querySelector("header"),header.classList.add("ocultar")}function mostrarHeader(){header=document.querySelector("header"),header.classList.remove("ocultar")}function agregarFixed(){header=document.querySelector(".header"),sectionReferencia=document.querySelector(".nombre-pagina"),document.addEventListener("scroll",(function(){sectionReferencia.getBoundingClientRect().top<1?header.classList.add("positionFixed"):header.classList.remove("positionFixed")}))}function eventoInputs(){inputBoton=document.querySelectorAll("[name='user[contacto]']"),inputBoton.forEach((function(e){e.addEventListener("click",(function(e){target=e.target.id,mostrar(target)}))}))}function mostrar(e){div=document.querySelector(".contactoDiv"),"byTelefono"===e&&(div.innerHTML='\n        <label for="telefono">Numero de Celular</label>\n        <input id="telefono" type="tel" placeholder="Tu numero de celular" name="user[telefono]">\n        '),"byEmail"===e&&(div.innerHTML='\n        <label for="email">Correo</label>\n        <input id="email" type="email" placeholder="Tu correo electronico" name="user[email]">\n        ')}
//# sourceMappingURL=app.js.map
