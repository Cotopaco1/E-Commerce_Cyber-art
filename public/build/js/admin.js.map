{"version":3,"file":"admin.js","names":["activar_evento_submit_by_id","capturar_y_verificar_datos_de_formulario","crear_alerta_de_cargando","eliminar_alerta_de_cargando","document","addEventListener","iniciarApp","productos_json","pedidos_json","mostrarDatosResumen","eventosBotones","eventos_botones_menu","querySelector","actualizarPagina","mostrarProductos","mostrar_crear_producto","mostrarPedidos","cambiarTitulo","crearTabla","solicitud_get_por_url","then","llenarAndMostrarTablaPedidos","insertar_buscador","contenido","div","createElement","classList","add","innerHTML","prepend","getElementById","evento_buscador","e","fecha","target","value","resultado","datos","tabla","respuesta","idAnterior","forEach","pedido","id","status","total","tr","parseInt","toLocaleString","appendChild","evento_botones_pedidos_action","querySelectorAll","boton","mostrar_ver_pedido","crearModal","idPedido","dataset","insertar_al_modal_pedido_ver","find","nombre","email","telefono","direccion","informacion_adicional","metodo_pago","cedula","eliminarModal","insertar_formulario_crear","evento_formulario_crear","async","event","preventDefault","formData","FormData","url","location","origin","options","method","body","fetch","json","Swal","fire","title","text","mensaje","icon","fontsize","console","log","divRespuesta","alertas","alerta","parrafo","textContent","error","evento_botones_action","mostrar_editar_producto","mostrar_ver_producto","eliminar_producto","data","JSON","stringify","idProducto","producto","insertar_al_modal_producto_ver","descripcion","disponible","imagen","precio","size","llenarAndMostrarTablaProductos","titulo","args","trHead","td","insertar_al_modal_producto","evento_formulario_actualizar","eliminar_modal_and_mostrar_productos","modal","evento_para_cerrar_modal","closest","remove","getDatosResumen","imprimirDatosResumen","cantidad_pedidos","cantidad_productos","cantidad_usuarios","reload"],"sources":["admin.js"],"mappings":"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","ignoreList":[],"sourcesContent":["import {activar_evento_submit_by_id,\r\n    capturar_y_verificar_datos_de_formulario,\r\n    crear_alerta_de_cargando,\r\n    eliminar_alerta_de_cargando\r\n} from './helper.js';\r\n\r\ndocument.addEventListener('DOMContentLoaded', function(){\r\n    \r\n    iniciarApp();\r\n})\r\n//Globales\r\nlet productos_json = {};\r\nlet pedidos_json = {}; \r\n/* window.respuestaGlobal = {}; */\r\n//Cierro globales\r\nfunction iniciarApp(){\r\n\r\n    mostrarDatosResumen();\r\n    eventosBotones();\r\n    eventos_botones_menu();\r\n    \r\n}\r\n\r\n\r\n//modal actualizar\r\n\r\n//Termina modal actualizar\r\n\r\n//Botones menu\r\nfunction eventos_botones_menu(){\r\n    document.querySelector('#home').addEventListener('click', actualizarPagina)\r\n    document.querySelector('#productos').addEventListener('click', mostrarProductos)\r\n    document.querySelector('#nuevo_producto').addEventListener('click', mostrar_crear_producto);\r\n    document.querySelector('#pedidos').addEventListener('click', mostrarPedidos);\r\n}\r\n//Termina botones menu\r\n\r\n//Botones footer admin\r\nfunction eventosBotones(){\r\n    document.querySelector('#boton_pedidos').addEventListener('click', mostrarPedidos);\r\n    document.querySelector('#boton_productos').addEventListener('click', mostrarProductos);\r\n}\r\n//Termina botones foter admin\r\n\r\n//Empieza pedidos\r\n\r\nfunction mostrarPedidos(){\r\n    cambiarTitulo('Pedidos');\r\n   \r\n    crearTabla(['id','fecha','estado','monto_total','actions'])\r\n    solicitud_get_por_url('/api/admin/get_pedidos')\r\n    .then(llenarAndMostrarTablaPedidos);\r\n    insertar_buscador();\r\n   \r\n}\r\nfunction insertar_buscador(){\r\n    const contenido = document.querySelector('.contenido');\r\n    const div = document.createElement('DIV');\r\n    div.classList.add('div_buscador');\r\n    div.innerHTML = `\r\n    <label htmlFor=\"buscador\">Filtrar por fecha    <input class=\"input\" type=\"date\" id=\"buscador\" /></label>\r\n    `\r\n    contenido.prepend(div);\r\n    const buscador = document.getElementById('buscador');\r\n    buscador.addEventListener('input', evento_buscador)\r\n}\r\n\r\nfunction evento_buscador(e){\r\n    const fecha = e.target.value;\r\n    //vaciar body tabla\r\n    document.getElementById('tbody').innerHTML = ``\r\n    //consultar datos\r\n    solicitud_get_por_url(`/api/admin/get_pedidos_where?fecha=${fecha}`)\r\n    .then((resultado)=>{\r\n        llenarAndMostrarTablaPedidos(resultado)\r\n    })\r\n    \r\n}\r\nfunction llenarAndMostrarTablaPedidos(datos){\r\n    const tabla = document.getElementById('tbody');\r\n    pedidos_json = datos.respuesta;\r\n    let idAnterior = 0;\r\n    datos.respuesta.forEach(pedido=>{\r\n        const {id, fecha, status, total} = pedido;\r\n        if(id === idAnterior) return;\r\n        const tr = document.createElement('TR');\r\n        /* const td = document.createElement('TD'); */\r\n        tr.innerHTML = `\r\n        <td><p>${id}</p></td>\r\n        <td><p>${fecha}</p></td>\r\n        <td><p>${status}</p></td>\r\n        <td><p>$<span>${parseInt(total).toLocaleString()}</span></p></td>\r\n        <td>\r\n        <button data-id=\"${id}\" class=\"boton-ver\">Ver</button>\r\n        </td>\r\n        `\r\n        tabla.appendChild(tr);\r\n        idAnterior = id;\r\n    })\r\n    evento_botones_pedidos_action();\r\n}\r\nfunction evento_botones_pedidos_action(){\r\n    document.querySelectorAll('.boton-ver').forEach(boton=>{\r\n        boton.addEventListener('click',mostrar_ver_pedido)\r\n    })\r\n}\r\nfunction mostrar_ver_pedido(e){\r\n    crearModal();\r\n    const idPedido = e.target.dataset.id;\r\n    const pedido = pedidos_json.find(function(target){\r\n        return target.id === idPedido;        \r\n    });\r\n\r\n    insertar_al_modal_pedido_ver(pedido);\r\n    //creamos modal\r\n    //INSERTAMOS AL MODAL\r\n\r\n}\r\nfunction insertar_al_modal_pedido_ver(pedido){\r\n\r\n    const {id, fecha, status, nombre, email, telefono, direccion,\r\n        informacion_adicional,total,metodo_pago, cedula\r\n    } = pedido\r\n    const modal = document.querySelector('.contenido_modal');\r\n\r\n    modal.innerHTML= `\r\n    <div class=\"producto_div pedido_div\">\r\n            <div class=\"pedido_div_uno\">\r\n                <p>ID Pedido: <span>${id}</span></p>\r\n                <p>Fecha: <span>${fecha}</span></p>\r\n                <p>Estado: <span>${status}</span></p>\r\n        \r\n            </div>\r\n            <div class=\"pedido_div_dos\">\r\n                <p>Nombre: <span>${nombre}</span></p>\r\n                <p>Correo: <span>${email}</span></p>\r\n                <p>telefono: <span>${telefono}</span></p>\r\n                <p>Cedula: <span>${cedula}</span></p>\r\n            </div>\r\n            <div class=\"div_pedido_tres\">\r\n                <p>Direccion: <span>${direccion}</span></p>\r\n            </div>\r\n            <div> <p>Informacion Adicional: <span>${informacion_adicional}</span></p></div>\r\n            <div class=\"div_productos_comprados\">\r\n\r\n            </div>\r\n            <div class=\"div_pedido_footer\">\r\n                <p>Estado: <span>${status}</span></p>\r\n                <p>Metodo de pago: <span>${metodo_pago}</span></p>\r\n                </div>\r\n            <p>Total: <span>$${parseInt(total).toLocaleString()}</span></p>\r\n\r\n        <div class=\"producto_div_footer\">\r\n            <button class=\"boton-eliminar\" id=\"cancelar_boton\">Volver</button>\r\n        </div>\r\n    </div>\r\n    `\r\n    /* if(disponible === 1){\r\n        const optionSelected = document.getElementById('disponible');\r\n        optionSelected.setAttribute('selected')\r\n        \r\n    } */\r\n    const boton_cancelar = document.getElementById('cancelar_boton');\r\n    boton_cancelar.addEventListener('click', eliminarModal)\r\n\r\n}\r\n\r\n//termina pedidos\r\n\r\n//Empieza crear productos\r\nfunction mostrar_crear_producto(){\r\n    insertar_formulario_crear();\r\n    cambiarTitulo('Crear Producto')\r\n    // evento para crear producto\r\n    document.querySelector('.formulario').addEventListener('submit', evento_formulario_crear)\r\n}\r\nasync function evento_formulario_crear(event){\r\n    event.preventDefault();\r\n    const formData = new FormData(event.target);\r\n        /* const prueba = [...formData];\r\n        console.log(prueba);\r\n        return; */\r\n    //Si no esta vacio, entonces hacemos fetch para actualizar.\r\n    try {\r\n\r\n        const url = `${location.origin}/api/admin/crear_producto`;\r\n        const options = {\r\n            method: 'post',\r\n            body: formData\r\n        }\r\n        crear_alerta_de_cargando();\r\n        const resultado = await fetch(url, options);\r\n        const respuesta = await resultado.json();\r\n        eliminar_alerta_de_cargando();\r\n        if(respuesta.resultado){\r\n            Swal.fire({\r\n                title: \"Buen trabajo!\",\r\n                text: `${respuesta.mensaje}`,\r\n                icon: \"success\",\r\n                fontsize: '5rem',\r\n                }).then(mostrarProductos)\r\n        }else{\r\n            console.log(respuesta);\r\n            const divRespuesta = document.getElementById('mensaje_error')\r\n            divRespuesta.innerHTML = ``;\r\n            respuesta.alertas.forEach(alerta=>{\r\n                const parrafo = document.createElement('P')\r\n                parrafo.textContent = alerta;\r\n                divRespuesta.appendChild(parrafo);\r\n            })\r\n            /* divRespuesta.innerHTML = `\r\n            \r\n            <p>${respuesta.alertas[0]}</p>\r\n            ` */\r\n        }\r\n        \r\n\r\n        \r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\nfunction insertar_formulario_crear(){\r\n    const contenido = document.querySelector('.contenido')\r\n    contenido.innerHTML = `\r\n     <form class=\"producto_div formulario crear_producto\" id=\"formulario\" enctype=\"multipart/form-data\">\r\n                <div class=\"informacion_producto \">\r\n                    <label htmlFor=\"nombre_editar\">Nombre: <input name=\"nombre\" id=\"nombre_editar\" type=\"text\" /></label>\r\n                    <label >Precio: <input name=\"precio\" id=\"precio_editar\" type=\"text\"/></label>\r\n                    <label htmlFor=\"\">\r\n                    Disponible:\r\n                    <select id=\"select_disponible\" name=\"disponible\">\r\n                        <option value=\"1\">Si</option>\r\n                        <option value=\"0\">No</option>\r\n                    </select>\r\n                    </label>\r\n                    <label htmlFor=\"\">Tamaño: <input type=\"text\" name=\"size\" /></label>\r\n                </div>\r\n           \r\n            <div class=\"div_producto_dos\">\r\n                <input type=\"file\" name=\"imagen\" />\r\n                 <label for=\"descripcion\" >Descripcion:</label>\r\n                  <textarea name=\"descripcion\" id=\"descripcion\" placeholder=\"Escribe la descripcion\" ></textarea>\r\n            </div>\r\n        <div id=\"mensaje_error\"></div>\r\n        <div class=\"producto_div_footer\">\r\n            <input type=\"submit\" value=\"Crear producto\" id=\"crear_producto\" class=\"boton-ver\" />\r\n            \r\n        </div>\r\n    </form>\r\n    `\r\n\r\n}\r\n\r\n//Termina crear productos\r\n\r\n//Empieza Productos\r\n\r\nfunction evento_botones_action(){\r\n    document.querySelectorAll('.boton-editar').forEach(boton=>{\r\n        boton.addEventListener('click', mostrar_editar_producto)\r\n    });\r\n    document.querySelectorAll('.boton-ver').forEach(boton=>{\r\n        boton.addEventListener('click', mostrar_ver_producto)\r\n    })\r\n    document.querySelectorAll('.boton-eliminar').forEach(boton=>{\r\n        boton.addEventListener('click', eliminar_producto)\r\n    })\r\n    \r\n}\r\n    //Empiza eliminar\r\n        //Realizar un fetch post, para eliminar un producto.\r\nasync function eliminar_producto(event){\r\n    const id = event.target.dataset.id;\r\n    const data = {\r\n        id: id\r\n    }\r\n    const url = '/api/admin/eliminar_producto';\r\n    try {\r\n        const options = {\r\n            method: 'POST',\r\n            body: JSON.stringify(data)\r\n        }\r\n        const resultado = await fetch(url, options);\r\n        const respuesta = await resultado.json();\r\n        if(respuesta.resultado){\r\n            Swal.fire({\r\n                title: \"Buen trabajo!\",\r\n                text: `${respuesta.mensaje}`,\r\n                icon: \"success\",\r\n                fontsize: '5rem',\r\n              }).then(mostrarProductos)\r\n        }else{\r\n            Swal.fire({\r\n                title: \"Error!\",\r\n                text: `${respuesta.mensaje}`,\r\n                icon: \"error\",\r\n                fontsize: '5rem',\r\n              })\r\n        }\r\n\r\n\r\n        \r\n    } catch (error) {\r\n        \r\n    }\r\n    //obtener id del producto a eliminar\r\n    //Enviar fetch\r\n    //si respuesta es true, actualizar productos.\r\n    //Si es falso, mostrar alerta de error.\r\n\r\n} \r\n    //Termina eliminar\r\n\r\n    //Empieza ver\r\nfunction mostrar_ver_producto(e){\r\n    const idProducto = e.target.dataset.id;\r\n    const producto = productos_json.find(function(target){\r\n        return target.id === idProducto;        \r\n    });\r\n\r\n    crearModal();\r\n    insertar_al_modal_producto_ver(producto);\r\n}\r\nfunction insertar_al_modal_producto_ver(producto){\r\n    const {descripcion, disponible, id, imagen, nombre, precio, size} = producto\r\n    const modal = document.querySelector('.contenido_modal');\r\n    modal.innerHTML= `\r\n    <div class=\"producto_div\">\r\n            <div class=\"div_producto_uno\">\r\n                <div class=\"imagen_producto_div\">\r\n                    <img src=\"/img/productos/${imagen}\" alt=\"imagenProducto\" />\r\n                    \r\n                </div>\r\n                <div class=\"informacion_producto\">\r\n                    <p >ID: <span>${id}</span></p>\r\n                    <p>Nombre: <span>${nombre}</span></p>\r\n                    <p>Precio: <span>${precio}</span></p>\r\n                    <p>Tamaño: <span>${size}</span></p>\r\n                    <label htmlFor=\"\">\r\n                    Disponible:\r\n                    <select disabled id=\"select_disponible\" name=\"disponible\">\r\n                        <option value=\"1\">Si</option>\r\n                        <option value=\"0\">No</option>\r\n                    </select>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class=\"div_producto_dos\">\r\n                 <p for=\"descripcion\" ><span>Descripcion:</span></p>\r\n                  <textarea name=\"descripcion\" id=\"descripcion\" disabled>${descripcion}</textarea>\r\n            </div>\r\n        <div class=\"producto_div_footer\">\r\n            <button class=\"boton-eliminar\" id=\"cancelar_boton\">Volver</button>\r\n        </div>\r\n    </div>\r\n    `\r\n    /* if(disponible === 1){\r\n        const optionSelected = document.getElementById('disponible');\r\n        optionSelected.setAttribute('selected')\r\n        \r\n    } */\r\n   const select = document.getElementById('select_disponible');\r\n   select.value = disponible;\r\n    const boton_cancelar = document.getElementById('cancelar_boton');\r\n    boton_cancelar.addEventListener('click', eliminarModal)\r\n}\r\n    //Termina ver\r\n\r\n    //Empieza editar\r\nfunction mostrarProductos(){\r\n    cambiarTitulo('Productos')\r\n    crearTabla(['Imagen','Nombre','Precio','Actions']);\r\n    solicitud_get_por_url('/api/cuadros/getcuadros')\r\n    .then(llenarAndMostrarTablaProductos);\r\n    //Crear tabla para mostrar productos.\r\n    //Solicitar informacion de los productos.\r\n    //Insertar la informacion de los productos a la tabla\r\n    //Mostrar la tabla creada en pantalla\r\n    //crear evento al boton editar\r\n    //crear evento al boton ver\r\n    //crear evento al boton eliminar.\r\n}\r\nfunction cambiarTitulo(titulo){\r\n    const tituloDiv = document.querySelector('.titulo_app');\r\n    tituloDiv.innerHTML = `<h1>${titulo}</h1>`\r\n}\r\nfunction crearTabla(args = []){\r\n    const contenido = document.querySelector('.contenido')\r\n    contenido.innerHTML = `\r\n    <table class=\"tablaResumen id=\"tabla\">\r\n    <thead>\r\n            <tr class=\"trHead\">\r\n                \r\n            </tr>\r\n        </thead>\r\n        <tbody id=\"tbody\">\r\n        \r\n        </tbody>\r\n    </table>\r\n    `\r\n    const trHead = document.querySelector('.trHead');\r\n    args.forEach(mensaje=>{\r\n        const td = document.createElement('TD');\r\n        td.textContent = mensaje;\r\n        trHead.appendChild(td);\r\n    })\r\n\r\n\r\n}\r\nfunction llenarAndMostrarTablaProductos(datos){\r\n    const tabla = document.getElementById('tbody');\r\n    productos_json = datos;\r\n    datos.forEach(producto=>{\r\n        const {descripcion, disponible, id, imagen, nombre, precio, size} = producto;\r\n        const tr = document.createElement('TR');\r\n        /* const td = document.createElement('TD'); */\r\n        tr.innerHTML = `\r\n        <td><img src=\"/img/productos/${imagen}\" alt=\"imagenProducto\" /></td>\r\n        <td><p>${nombre}</p></td>\r\n        <td><p>$<span>${parseInt(precio).toLocaleString()}</span></p></td>\r\n        <td>\r\n            <div class=\"actions\">\r\n                <button data-id=\"${id}\" class=\"boton-editar\">Editar</button>\r\n                <button data-id=\"${id}\" class=\"boton-ver\">Ver</button>\r\n                <button data-id=\"${id}\" class=\"boton-eliminar\">Eliminar</button>\r\n            </div>\r\n        </td>\r\n        `\r\n        tabla.appendChild(tr);\r\n\r\n    })\r\n    evento_botones_action();\r\n}\r\nasync function solicitud_get_por_url(url){\r\n\r\n    try {\r\n        /* url = 'http://localhost:3000/api/cuadros/getCuadros'; */\r\n        const resultado = await fetch(url);\r\n        const respuesta = await resultado.json();\r\n        return respuesta;\r\n        \r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\nfunction mostrar_editar_producto(e){\r\n    const idProducto =e.target.dataset.id;\r\n    const producto = productos_json.find(function(target){\r\n        return target.id === idProducto;        \r\n    });\r\n\r\n    crearModal();\r\n    insertar_al_modal_producto(producto);\r\n    //crear evento submit para el formulario.\r\n    document.querySelector('.formulario').addEventListener('submit', evento_formulario_actualizar)\r\n        \r\n}\r\n\r\nasync function evento_formulario_actualizar(event){\r\n   /*  const datos = capturar_y_verificar_datos_de_formulario(event); */\r\n    //Si algun valor de un input es vacio entonces:\r\n        /* if(!datos){\r\n            const mensaje_div = document.getElementById('mensaje_error');\r\n            const mensajeAnterior = mensaje_div.firstChild;\r\n            if(mensajeAnterior) mensajeAnterior.remove();\r\n            const mensaje = document.createElement('P');\r\n            mensaje.textContent = 'Porfavor rellena todos los campos.'\r\n            mensaje_div.appendChild(mensaje);\r\n            return; \r\n        }  */\r\n            event.preventDefault();\r\n            const formData = new FormData(event.target);\r\n            /* const prueba = [...formData];\r\n            console.log(prueba);\r\n            return; */\r\n\r\n        //Si no esta vacio, entonces hacemos fetch para actualizar.\r\n        try {\r\n\r\n            /* const json = JSON.stringify(datos); */\r\n\r\n            const url = `${location.origin}/api/admin/actualizar_producto`;\r\n            const options = {\r\n                method: 'post',\r\n                body: formData\r\n            }\r\n            crear_alerta_de_cargando();\r\n            const resultado = await fetch(url, options);\r\n            const respuesta = await resultado.json();\r\n            eliminar_alerta_de_cargando();\r\n            if(respuesta.resultado){\r\n                Swal.fire({\r\n                    title: \"Buen trabajo!\",\r\n                    text: `${respuesta.mensaje}`,\r\n                    icon: \"success\",\r\n                    fontsize: '5rem',\r\n                  }).then(eliminar_modal_and_mostrar_productos)\r\n            }else{\r\n                \r\n                const divRespuesta = document.getElementById('mensaje_error')\r\n                divRespuesta.innerHTML = ``;\r\n                respuesta.alertas.forEach(alerta=>{\r\n                    const parrafo = document.createElement('P')\r\n                    parrafo.textContent = alerta;\r\n                    divRespuesta.appendChild(parrafo);\r\n                })\r\n                /* divRespuesta.innerHTML = `\r\n                \r\n                <p>${respuesta.alertas[0]}</p>\r\n                ` */\r\n            }\r\n            \r\n\r\n            \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n        \r\n}\r\nfunction eliminar_modal_and_mostrar_productos(){\r\n    eliminarModal()\r\n    mostrarProductos()\r\n\r\n}\r\nfunction insertar_al_modal_producto(producto){\r\n    const {descripcion, disponible, id, imagen, nombre, precio, size} = producto\r\n    const modal = document.querySelector('.contenido_modal');\r\n    modal.innerHTML= `\r\n    <form class=\"producto_div formulario\" id=\"formulario\" enctype=\"multipart/form-data\">\r\n        \r\n            <div class=\"div_producto_uno\">\r\n                <div class=\"imagen_producto_div\">\r\n                    <img src=\"/img/productos/${imagen}\" alt=\"imagenProducto\" />\r\n                    \r\n                </div>\r\n                <div class=\"informacion_producto\">\r\n                    <label htmlFor=\"\">ID: ${id}</label>\r\n                    <input type=\"hidden\" name=\"id\" value=\"${id}\" />\r\n                    <label htmlFor=\"nombre_editar\">Nombre: <input name=\"nombre\" id=\"nombre_editar\" type=\"text\" value=\"${nombre}\" /></label>\r\n                    <label >Precio: <input name=\"precio\" id=\"precio_editar\" type=\"text\" value=\"${precio}\" /></label>\r\n                    <label htmlFor=\"\">\r\n                    Disponible:\r\n                    <select id=\"select_disponible\" name=\"disponible\">\r\n                        <option value=\"1\">Si</option>\r\n                        <option value=\"0\">No</option>\r\n                    </select>\r\n                    </label>\r\n                    <label htmlFor=\"\">Tamaño: <input type=\"text\" name=\"size\" value=\"${size}\" /></label>\r\n                </div>\r\n            </div>\r\n            <div class=\"div_producto_dos\">\r\n                <input type=\"file\" name=\"imagen\" value=\"${imagen}\" />\r\n                 <label for=\"descripcion\" >Descripcion:</label>\r\n                  <textarea name=\"descripcion\" id=\"descripcion\" >${descripcion}</textarea>\r\n            </div>\r\n        <div id=\"mensaje_error\"></div>\r\n        <div class=\"producto_div_footer\">\r\n            <input type=\"submit\" value=\"Actualizar Datos\" id=\"actualizar_datos\" class=\"boton-ver\" />\r\n            <button class=\"boton-eliminar\" id=\"cancelar_boton\">Cancelar</button>\r\n        </div>\r\n    </form>\r\n    `\r\n    /* if(disponible === 1){\r\n        const optionSelected = document.getElementById('disponible');\r\n        optionSelected.setAttribute('selected')\r\n        \r\n    } */\r\n   const select = document.getElementById('select_disponible');\r\n   select.value = disponible;\r\n\r\n    const boton_cancelar = document.getElementById('cancelar_boton');\r\n    boton_cancelar.addEventListener('click', eliminarModal)\r\n\r\n}\r\n\r\nfunction crearModal(){\r\n    //este codigo solo se ejecuta una vez..\r\n    const modal = document.createElement('DIV');\r\n    modal.classList.add('modal');\r\n    modal.innerHTML = `\r\n    <div class=\"contenido_modal\"></div>\r\n    `\r\n    modal.addEventListener('click', evento_para_cerrar_modal)\r\n    const body = document.querySelector('body');\r\n\r\n    body.appendChild(modal);\r\n}\r\nfunction evento_para_cerrar_modal(event){\r\n    const eventClass = event.target.closest('.producto_div')\r\n    if(!eventClass){\r\n        eliminarModal();\r\n    }\r\n}\r\nfunction eliminarModal(){\r\n    const modal = document.querySelector('.modal')\r\n    modal.remove();\r\n       \r\n}\r\n    //Termina editar\r\n\r\n//Termina productos\r\n\r\n\r\n//Resumen\r\nfunction mostrarDatosResumen(){\r\n   getDatosResumen()\r\n   .then(imprimirDatosResumen);\r\n}\r\nfunction imprimirDatosResumen(datos){\r\n    const spanNumeroPedidos = document.querySelector('#numero_pedidos span')\r\n    spanNumeroPedidos.textContent = datos.respuesta.cantidad_pedidos\r\n\r\n    const spanNumeroProductos = document.querySelector('#numero_productos span')\r\n    spanNumeroProductos.textContent = datos.respuesta.cantidad_productos\r\n\r\n    const spanNumeroUsuarios = document.querySelector('#numero_usuarios span')\r\n    spanNumeroUsuarios.textContent = datos.respuesta.cantidad_usuarios\r\n\r\n\r\n}\r\nasync function getDatosResumen(){\r\n\r\n    try {\r\n        \r\n        const url = 'http://localhost:3000/api/admin/get_info_resumen'\r\n\r\n        const resultado = await fetch(url);\r\n        const $respuesta = await resultado.json();\r\n        return $respuesta;\r\n        \r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n\r\n}\r\nfunction actualizarPagina(){\r\n    location.reload();\r\n}\r\n//Termina resumen"]}