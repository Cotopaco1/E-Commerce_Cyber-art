{"version":3,"file":"landingPage.js","names":["document","addEventListener","iniciarApp","productos","cuenta_regresiva","slider","expandirCampo","oferta","peticion_get","then","e","querySelector","preventDefault","crear_alerta_cargando","requestAnimationFrame","enviar_formulario","querySelectorAll","forEach","contenedor","scroll_form","respuesta","horas","minutos","segundos","totalSegundos","horas_p","Math","floor","minutos_p","segundos_p","getElementById","textContent","cuentaRegresa","setInterval","clearInterval","sliderInner","cantidadImg","length","index","num","style","transform","campo","event","target","currentTarget","nextElementSibling","icono","firstElementChild","classList","toggle","contains","maxHeight","scrollHeight","setTimeout","div_otro_cuadro","value","add","remove","inputCheckbox","checked","evento","Event","bubbles","dispatchEvent","console","log","referencia","parentElement","div","createElement","setAttribute","producto","label","input","type","name","nombre","img","src","imagen","appendChild","insertAdjacentElement","async","data","Object","fromEntries","FormData","options","method","body","JSON","stringify","url","resultado","fetch","json","exito","eliminar_alerta_cargando","Swal","fire","title","text","icon","mostrar_alerta_error","error","display","alerta","tipo","alertas","mensaje","scrollIntoView","behavior","block"],"sources":["landingPage.js"],"mappings":"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","ignoreList":[],"sourcesContent":["document.addEventListener('DOMContentLoaded', function(){\r\n    iniciarApp();\r\n\r\n})\r\n//variables globales\r\nlet productos = [];\r\n//termina variables globales\r\n\r\nfunction iniciarApp(){\r\n    cuenta_regresiva();\r\n    slider();\r\n    expandirCampo();\r\n    oferta();\r\n    peticion_get('/api/cuadros/getcuadros')\r\n    .then(e=>{\r\n        productos = e;\r\n    })\r\n    //evento del formulario\r\n    document.querySelector('#formulario').addEventListener('submit', function(e){ \r\n        e.preventDefault();\r\n        crear_alerta_cargando();\r\n        requestAnimationFrame(() => enviar_formulario(e));\r\n       \r\n    } )\r\n    //scroll hacia formulario\r\n    document.querySelectorAll('.quiero_comprar').forEach(contenedor=>{\r\n        contenedor.addEventListener('click', scroll_form);\r\n    })\r\n\r\n}\r\nfunction cuenta_regresiva(){\r\n    //obtener el tiempo restante.\r\n    peticion_get('/api/lp/cuenta_regresiva')\r\n    .then(respuesta=>{\r\n\r\n        const {horas, minutos, segundos} = respuesta.cuenta_regresiva;\r\n\r\n        let totalSegundos = (horas * 3600) + (minutos * 60) + segundos;\r\n        let horas_p = Math.floor(totalSegundos / 3600);\r\n        let minutos_p = Math.floor((totalSegundos % 3600) / 60);\r\n        let segundos_p = totalSegundos % 60;\r\n\r\n        document.getElementById('cuenta_regresiva__horas').textContent = `${horas_p}`\r\n        document.getElementById('cuenta_regresiva__minutos').textContent = `${minutos_p}`\r\n        document.getElementById('cuenta_regresiva__segundos').textContent = `${segundos_p}`\r\n\r\n        //setinterval de 1s\r\n        //actualizar el contador en pantalla cada segundo.\r\n        const cuentaRegresa = setInterval(() => {\r\n            let horas = Math.floor(totalSegundos / 3600);\r\n            let minutos = Math.floor((totalSegundos % 3600) / 60);\r\n            let segundos = totalSegundos % 60;\r\n\r\n            document.getElementById('cuenta_regresiva__horas').textContent = `${horas}`\r\n            document.getElementById('cuenta_regresiva__minutos').textContent = `${minutos}`\r\n            document.getElementById('cuenta_regresiva__segundos').textContent = `${segundos}`\r\n\r\n            if(totalSegundos <= 0){\r\n                clearInterval(cuentaRegresa);\r\n            }else{\r\n                totalSegundos--;\r\n            }\r\n        }, 1000);\r\n    })\r\n}\r\n\r\nfunction slider(){\r\n\r\n    const sliderInner = document.querySelector('.slider__inner');\r\n    /* sliderInner.style.transform = \"translate(-200%)\" */\r\n    const cantidadImg = sliderInner.querySelectorAll('img').length;\r\n    let index = 1;\r\n    setInterval(() => {\r\n        let num = index * -100;\r\n        /* console.log(`translate(${num})`); */\r\n        sliderInner.style.transform = `translate(${num}%)`;\r\n        index++;\r\n        if(index > cantidadImg -1){\r\n            index = 0;\r\n        }\r\n    }, 1500);\r\n\r\n}\r\nfunction expandirCampo(){\r\n    const camposFooter = document.querySelectorAll('.flex');\r\n    camposFooter.forEach(function(campo){\r\n        campo.addEventListener('click', event=>{\r\n            const target = event.currentTarget.nextElementSibling\r\n            const icono = event.currentTarget.firstElementChild;\r\n            target.classList.toggle('mostrar_respuesta')\r\n\r\n            if(target.classList.contains('mostrar_respuesta')){\r\n                //ajustar altura.\r\n                target.style.maxHeight = target.scrollHeight + 'px';\r\n                //Cambiar el transform a la imagen.\r\n                icono.style.transform = 'rotate(0.5turn)';\r\n                \r\n            }else{\r\n                target.style.maxHeight = '0';\r\n                icono.style.transform = 'rotate(0turn)';\r\n            }\r\n\r\n            setTimeout(() => {\r\n                target.style.maxHeight = target.classList.contains('mostrar_respuesta') ? target.style.maxHeight = target.scrollHeight + 'px' : '0';\r\n            }, 10);\r\n\r\n\r\n        }) \r\n    })\r\n}\r\nfunction oferta(){\r\n    document.querySelector('#oferta').addEventListener('input', event=>{\r\n        const div_otro_cuadro =  document.querySelector('#otro_cuadro_div');\r\n        const target = event.target;\r\n        if(event.target.value === '2'){\r\n            div_otro_cuadro.classList.add('mostrar_respuesta');\r\n\r\n        }else{\r\n            if(div_otro_cuadro.classList.contains('mostrar_respuesta')){\r\n                div_otro_cuadro.classList.remove('mostrar_respuesta');\r\n            }\r\n            const inputCheckbox = document.querySelector('#otro_cuadro');\r\n            if(inputCheckbox.checked){\r\n                /* console.dir(document.querySelector('#otro_cuadro')) */\r\n                inputCheckbox.checked = false;\r\n                // Crear y despachar el evento 'change'\r\n                const evento = new Event('change', { bubbles: true });\r\n                inputCheckbox.dispatchEvent(evento);\r\n            }\r\n        }\r\n\r\n        if(div_otro_cuadro.classList.contains('mostrar_respuesta')){\r\n            //ajustar altura.\r\n            div_otro_cuadro.style.maxHeight = div_otro_cuadro.scrollHeight + 'px';\r\n            //Cambiar el transform a la imagen.\r\n            \r\n        }else{\r\n            div_otro_cuadro.style.maxHeight = '0';\r\n        }\r\n\r\n        setTimeout(() => {\r\n            div_otro_cuadro.style.maxHeight = div_otro_cuadro.classList.contains('mostrar_respuesta') ? div_otro_cuadro.style.maxHeight = div_otro_cuadro.scrollHeight + 'px' : '0';\r\n        }, 10);\r\n\r\n    })\r\n\r\n\r\n\r\n\r\n    document.querySelector('#otro_cuadro').addEventListener('change', event=>{\r\n        console.log('se ha activado el evento de input..')\r\n        const checked = event.target.checked;\r\n        const referencia = event.target.parentElement;\r\n        /* console.dir(event.target.parentElement) */\r\n        if(checked){\r\n            /* const parrafo = document.createElement('P');\r\n            parrafo.textContent = 'Selecciona la imagen del otro cuadro deseado';\r\n            parrafo.classList.add('formulario_lp__texto')\r\n            console.log(referencia); */\r\n            //\r\n            /* referencia.insertAdjacentElement('afterend', parrafo); */\r\n            //mostrar opciones\r\n            const div = document.createElement('DIV');\r\n            div.classList.add('slider-manual')\r\n            div.setAttribute('id','slider-manual');\r\n            productos.forEach(producto=>{\r\n                const label = document.createElement('LABEL');\r\n                label.classList.add('slider-manual__label')\r\n\r\n                const input = document.createElement('INPUT');\r\n                input.type = 'radio';\r\n                input.name = 'otro_producto_nombre';\r\n                input.value = producto.nombre;\r\n                input.classList.add('slider-manual__input')\r\n\r\n\r\n                const img = document.createElement('IMG');\r\n                img.src = 'img/productos/' + producto.imagen;\r\n\r\n                label.appendChild(input);\r\n                label.appendChild(img);\r\n                \r\n                div.appendChild(label);\r\n            })\r\n            console.log(div);\r\n            /* div.textContent = 'Prueba prueba'; */\r\n\r\n            referencia.insertAdjacentElement('afterend', div);\r\n\r\n        }else{\r\n            //borrar opciones si estan mostradas\r\n            const slider = document.querySelector('.slider-manual');\r\n            if(slider){\r\n                slider.remove();\r\n            }\r\n        }\r\n\r\n    })\r\n}\r\nasync function enviar_formulario(e){\r\n    const data = Object.fromEntries(new FormData(e.target))\r\n    options = {\r\n        method: 'post',\r\n        body: JSON.stringify(data)\r\n    }\r\n    url = '/api/lp/enviar_formulario';\r\n    try {\r\n        //hacer fetch.\r\n        \r\n        const resultado = await fetch(url,options);\r\n        const respuesta = await resultado.json();\r\n        //boton cargando...\r\n        if(respuesta.exito){\r\n            //eliminar boton cargando...\r\n            eliminar_alerta_cargando(true);\r\n            Swal.fire({\r\n                title: \"Pedido creado!\",\r\n                text: \"Tenemos tu pedido, pronto te contactaremos para confirmar y enviar tu pedido 😎\",\r\n                icon: \"success\"\r\n              });\r\n            //mostrar exito en pantalla.\r\n        }else{\r\n            //eliminar boton cargando...\r\n            eliminar_alerta_cargando(false);\r\n            mostrar_alerta_error(respuesta.error);\r\n\r\n            //mostrar alertas en pantalla\r\n        }\r\n        \r\n        \r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n\r\n}\r\n\r\n\r\n//helpers \r\nasync function peticion_get(url){\r\n    try {\r\n        const resultado = await fetch(url);\r\n        const respuesta = await resultado.json();\r\n        return respuesta;\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\nfunction crear_alerta_cargando(){\r\n    const contenedor = document.querySelector('#contenedor_submit');\r\n    const submit = document.querySelector('#submit');\r\n    submit.style.display = 'none';\r\n\r\n    const alerta = document.createElement('IMG');\r\n    alerta.src = 'img/iconos/loading.svg';\r\n    alerta.classList.add('alerta--cargando');\r\n\r\n    contenedor.appendChild(alerta);\r\n    \r\n}\r\nfunction eliminar_alerta_cargando(tipo){\r\n    document.querySelector('.alerta--cargando').remove();\r\n    if(!tipo){\r\n        document.querySelector('#submit').style.display = 'block';\r\n        return;\r\n    }\r\n    const contenedor = document.querySelector('#contenedor_submit');\r\n    const alerta = document.createElement('IMG');\r\n    alerta.src = 'img/iconos/check.svg';\r\n    alerta.classList.add('alerta--check');\r\n    contenedor.appendChild(alerta);\r\n\r\n}\r\nfunction mostrar_alerta_error(alertas){\r\n    //eliminar alertas anteriores\r\n    document.querySelectorAll('.mensaje-error').forEach(mensaje=>{\r\n        mensaje.remove();\r\n    })\r\n    alertas.forEach(alerta=>{\r\n        const mensaje = document.createElement('P');\r\n        mensaje.textContent = '**Este campo es obligatorio** ↓';\r\n        mensaje.classList.add('mensaje-error');\r\n\r\n\r\n\r\n        document.querySelector(`#${alerta}`).insertAdjacentElement('beforebegin', mensaje);\r\n        \r\n    })\r\n    //desplazar la vista del usuario al primer error\r\n    document.querySelector('.mensaje-error').scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'nearest'\r\n    })\r\n    setTimeout(() => {\r\n        document.querySelectorAll('.mensaje-error').forEach(mensaje=>{\r\n            mensaje.remove();\r\n        })\r\n    }, 4000);\r\n\r\n}\r\nfunction scroll_form(){\r\n    document.querySelector('#formulario').scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'start'\r\n    })\r\n}"]}