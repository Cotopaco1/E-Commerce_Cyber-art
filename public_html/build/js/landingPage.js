document.addEventListener("DOMContentLoaded",(function(){iniciarApp()}));let productos=[];function iniciarApp(){cuenta_regresiva(),slider(),expandirCampo(),oferta(),peticion_get("/api/cuadros/getcuadros").then((e=>{productos=e})),document.querySelector("#formulario").addEventListener("submit",(function(e){e.preventDefault(),crear_alerta_cargando(),requestAnimationFrame((()=>enviar_formulario(e)))})),document.querySelectorAll(".quiero_comprar").forEach((e=>{e.addEventListener("click",scroll_form)}))}function cuenta_regresiva(){peticion_get("/api/lp/cuenta_regresiva").then((e=>{const{horas:t,minutos:r,segundos:o}=e.cuenta_regresiva;let n=3600*t+60*r+o,a=Math.floor(n/3600),s=Math.floor(n%3600/60),c=n%60;document.getElementById("cuenta_regresiva__horas").textContent=`${a}`,document.getElementById("cuenta_regresiva__minutos").textContent=`${s}`,document.getElementById("cuenta_regresiva__segundos").textContent=`${c}`;const l=setInterval((()=>{let e=Math.floor(n/3600),t=Math.floor(n%3600/60),r=n%60;document.getElementById("cuenta_regresiva__horas").textContent=`${e}`,document.getElementById("cuenta_regresiva__minutos").textContent=`${t}`,document.getElementById("cuenta_regresiva__segundos").textContent=`${r}`,n<=0?clearInterval(l):n--}),1e3)}))}function slider(){const e=document.querySelector(".slider__inner"),t=e.querySelectorAll("img").length;let r=1;setInterval((()=>{let o=-100*r;e.style.transform=`translate(${o}%)`,r++,r>t-1&&(r=0)}),1500)}function expandirCampo(){document.querySelectorAll(".flex").forEach((function(e){e.addEventListener("click",(e=>{const t=e.currentTarget.nextElementSibling,r=e.currentTarget.firstElementChild;t.classList.toggle("mostrar_respuesta"),t.classList.contains("mostrar_respuesta")?(t.style.maxHeight=t.scrollHeight+"px",r.style.transform="rotate(0.5turn)"):(t.style.maxHeight="0",r.style.transform="rotate(0turn)"),setTimeout((()=>{t.style.maxHeight=t.classList.contains("mostrar_respuesta")?t.style.maxHeight=t.scrollHeight+"px":"0"}),10)}))}))}function oferta(){document.querySelector("#oferta").addEventListener("input",(e=>{const t=document.querySelector("#otro_cuadro_div");e.target;if("2"===e.target.value)t.classList.add("mostrar_respuesta");else{t.classList.contains("mostrar_respuesta")&&t.classList.remove("mostrar_respuesta");const e=document.querySelector("#otro_cuadro");if(e.checked){e.checked=!1;const t=new Event("change",{bubbles:!0});e.dispatchEvent(t)}}t.classList.contains("mostrar_respuesta")?t.style.maxHeight=t.scrollHeight+"px":t.style.maxHeight="0",setTimeout((()=>{t.style.maxHeight=t.classList.contains("mostrar_respuesta")?t.style.maxHeight=t.scrollHeight+"px":"0"}),10)})),document.querySelector("#otro_cuadro").addEventListener("change",(e=>{console.log("se ha activado el evento de input..");const t=e.target.checked,r=e.target.parentElement;if(t){const e=document.createElement("DIV");e.classList.add("slider-manual"),e.setAttribute("id","slider-manual"),productos.forEach((t=>{const r=document.createElement("LABEL");r.classList.add("slider-manual__label");const o=document.createElement("INPUT");o.type="radio",o.name="otro_producto_nombre",o.value=t.nombre,o.classList.add("slider-manual__input");const n=document.createElement("IMG");n.src="img/productos/"+t.imagen,r.appendChild(o),r.appendChild(n),e.appendChild(r)})),console.log(e),r.insertAdjacentElement("afterend",e)}else{const e=document.querySelector(".slider-manual");e&&e.remove()}}))}async function enviar_formulario(e){const t=Object.fromEntries(new FormData(e.target));options={method:"post",body:JSON.stringify(t)},url="/api/lp/enviar_formulario";try{const e=await fetch(url,options),t=await e.json();t.exito?(eliminar_alerta_cargando(!0),Swal.fire({title:"Pedido creado!",text:"Tenemos tu pedido, pronto te contactaremos para confirmar y enviar tu pedido ðŸ˜Ž",icon:"success"})):(eliminar_alerta_cargando(!1),mostrar_alerta_error(t.error))}catch(e){console.log(e)}}async function peticion_get(e){try{const t=await fetch(e);return await t.json()}catch(e){console.log(e)}}function crear_alerta_cargando(){const e=document.querySelector("#contenedor_submit");document.querySelector("#submit").style.display="none";const t=document.createElement("IMG");t.src="img/iconos/loading.svg",t.classList.add("alerta--cargando"),e.appendChild(t)}function eliminar_alerta_cargando(e){if(document.querySelector(".alerta--cargando").remove(),!e)return void(document.querySelector("#submit").style.display="block");const t=document.querySelector("#contenedor_submit"),r=document.createElement("IMG");r.src="img/iconos/check.svg",r.classList.add("alerta--check"),t.appendChild(r)}function mostrar_alerta_error(e){document.querySelectorAll(".mensaje-error").forEach((e=>{e.remove()})),e.forEach((e=>{const t=document.createElement("P");t.textContent="**Este campo es obligatorio** â†“",t.classList.add("mensaje-error"),document.querySelector(`#${e}`).insertAdjacentElement("beforebegin",t)})),document.querySelector(".mensaje-error").scrollIntoView({behavior:"smooth",block:"nearest"}),setTimeout((()=>{document.querySelectorAll(".mensaje-error").forEach((e=>{e.remove()}))}),4e3)}function scroll_form(){document.querySelector("#formulario").scrollIntoView({behavior:"smooth",block:"start"})}
//# sourceMappingURL=landingPage.js.map
