{"version":3,"file":"admin.js","names":["activar_evento_submit_by_id","capturar_y_verificar_datos_de_formulario","crear_alerta_de_cargando","eliminar_alerta_de_cargando","document","addEventListener","iniciarApp","productos_json","pedidos_json","filtros","fecha","estado","mostrarDatosResumen","eventosBotones","eventos_botones_menu","querySelector","actualizarPagina","mostrarProductos","mostrar_crear_producto","mostrarPedidos","mostrarMenu","e","classList","toggle","cambiarTitulo","crearTabla","solicitud_get_por_url","then","datos","respuesta","llenarAndMostrarTablaPedidos","insertar_buscador","contenido","div","createElement","add","innerHTML","prepend","getElementById","evento_buscador_fecha","evento_buscador_estado","target","value","pedidos","tabla","idAnterior","forEach","pedido","id","status","total","tr","parseInt","toLocaleString","appendChild","evento_botones_pedidos_action","querySelectorAll","boton","mostrar_ver_pedido","elemento","cambiar_estado","async","dataset","FormData","append","options","method","body","resultado","fetch","json","exito","console","log","error","crearModal","idPedido","insertar_al_modal_pedido_ver","find","nombre","email","telefono","direccion","informacion_adicional","metodo_pago","cedula","insertar_nombre_productos","eliminarModal","filter","producto","parrafo","productoNombre","productoCantidad","insertar_formulario_crear","evento_formulario_crear","event","preventDefault","formData","url","location","origin","Swal","fire","title","text","mensaje","icon","fontsize","divRespuesta","alertas","alerta","textContent","evento_botones_action","mostrar_editar_producto","mostrar_ver_producto","eliminar_producto","data","JSON","stringify","idProducto","insertar_al_modal_producto_ver","descripcion","disponible","imagen","precio","size","llenarAndMostrarTablaProductos","titulo","args","trHead","td","insertar_al_modal_producto","evento_formulario_actualizar","eliminar_modal_and_mostrar_productos","modal","evento_para_cerrar_modal","closest","remove","getDatosResumen","imprimirDatosResumen","cantidad_pedidos","cantidad_productos","cantidad_usuarios","reload"],"sources":["admin.js"],"mappings":"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","ignoreList":[],"sourcesContent":["import {activar_evento_submit_by_id,\r\n    capturar_y_verificar_datos_de_formulario,\r\n    crear_alerta_de_cargando,\r\n    eliminar_alerta_de_cargando\r\n} from './helper.js';\r\n\r\ndocument.addEventListener('DOMContentLoaded', function(){\r\n    \r\n    iniciarApp();\r\n})\r\n//Globales\r\nlet productos_json = {};\r\nlet pedidos_json = {}; \r\nlet filtros = {\r\n    fecha : '',\r\n    estado:'todos'\r\n}\r\n/* window.respuestaGlobal = {}; */\r\n//Cierro globales\r\nfunction iniciarApp(){\r\n\r\n    mostrarDatosResumen();\r\n    eventosBotones();\r\n    eventos_botones_menu();\r\n    \r\n}\r\n\r\n\r\n//modal actualizar\r\n\r\n//Termina modal actualizar\r\n\r\n//Botones menu\r\nfunction eventos_botones_menu(){\r\n    document.querySelector('#home').addEventListener('click', actualizarPagina)\r\n    document.querySelector('#productos').addEventListener('click', mostrarProductos)\r\n    document.querySelector('#nuevo_producto').addEventListener('click', mostrar_crear_producto);\r\n    document.querySelector('#pedidos').addEventListener('click', mostrarPedidos);\r\n}\r\n//Termina botones menu\r\n\r\n//Botones footer admin\r\nfunction eventosBotones(){\r\n    document.querySelector('#boton_pedidos').addEventListener('click', mostrarPedidos);\r\n    document.querySelector('#boton_productos').addEventListener('click', mostrarProductos);\r\n    document.querySelector('#menu_hamburgesa').addEventListener('click', mostrarMenu)\r\n}\r\n//Termina botones foter admin\r\n\r\n//comienza evento menu hamburgesa\r\nfunction mostrarMenu(e){\r\n    const menu = document.querySelector('.menu_administrador');\r\n    menu.classList.toggle('mostrar_flex');\r\n    return;\r\n    \r\n}\r\n\r\n//termina menu hamburgeesa\r\n\r\n//Empieza pedidos\r\n\r\nfunction mostrarPedidos(){\r\n    cambiarTitulo('Pedidos');\r\n   \r\n    crearTabla(['id','fecha','estado','monto_total','actions'])\r\n    solicitud_get_por_url('/api/admin/get_pedidos')\r\n    /* .then(llenarAndMostrarTablaPedidos);\r\n    insertar_buscador(); */\r\n    .then(function(datos){\r\n        pedidos_json = datos.respuesta;\r\n        llenarAndMostrarTablaPedidos();\r\n    });\r\n    insertar_buscador();\r\n   \r\n}\r\nfunction insertar_buscador(){\r\n    const contenido = document.querySelector('.contenido');\r\n    const div = document.createElement('DIV');\r\n    div.classList.add('div_buscador');\r\n    div.innerHTML = `\r\n    <label htmlFor=\"buscador\">Filtrar por fecha    <input class=\"input\" type=\"date\" id=\"buscador\" /></label>\r\n    <select name=\"estado\" id=\"buscador_estado\">\r\n        <option value=\"todos\" selected>Todos</option>\r\n        <option value=\"pendiente\">Pendiente</option>\r\n        <option value=\"completado\">Completado</option>\r\n    </select>\r\n    `\r\n    contenido.prepend(div);\r\n    //buscador fecha\r\n    const buscador = document.getElementById('buscador');\r\n    buscador.addEventListener('input', evento_buscador_fecha)\r\n    //buscador estado\r\n    const buscador_estado = document.getElementById('buscador_estado');\r\n    buscador_estado.addEventListener('change', evento_buscador_estado)\r\n}\r\n// Peticion where y llena pedidos_json con la respuesta;\r\nfunction evento_buscador_fecha(e){\r\n     filtros.fecha = e.target.value;\r\n    //vaciar body tabla\r\n    /* document.getElementById('tbody').innerHTML = `` */\r\n    //consultar datos\r\n    solicitud_get_por_url(`/api/admin/get_pedidos_filtrados?fecha=${filtros.fecha}&estado=${filtros.estado}`)\r\n    .then((datos)=>{\r\n        pedidos_json = datos.pedidos;\r\n        llenarAndMostrarTablaPedidos()\r\n    })\r\n    \r\n}\r\nfunction evento_buscador_estado(e){\r\n    filtros.estado = e.target.value;\r\n    //vaciar body tabla\r\n    /* document.getElementById('tbody').innerHTML = `` */\r\n    //consultar datos\r\n    solicitud_get_por_url(`/api/admin/get_pedidos_filtrados?fecha=${filtros.fecha}&estado=${filtros.estado}`)\r\n    .then((datos)=>{\r\n        pedidos_json = datos.pedidos;\r\n        llenarAndMostrarTablaPedidos()\r\n    })\r\n    \r\n}\r\n//Lo llena con el objeto global json_pedidos;\r\nfunction llenarAndMostrarTablaPedidos(){\r\n    const tabla = document.getElementById('tbody');\r\n    tabla.innerHTML = ``;\r\n    /* pedidos_json = datos.respuesta; */\r\n    let idAnterior = 0;\r\n    pedidos_json.forEach(pedido=>{\r\n        const {id, fecha, status, total} = pedido;\r\n        if(id === idAnterior) return;\r\n        const tr = document.createElement('TR');\r\n        /* const td = document.createElement('TD'); */\r\n        tr.innerHTML = `\r\n        <td><p>${id}</p></td>\r\n        <td><p>${fecha}</p></td>\r\n        <td><p class=\"${status} estado\" data-id=\"${id}\" data-estado=\"${status}\">${status}</p></td>\r\n        <td><p>$<span>${parseInt(total).toLocaleString()}</span></p></td>\r\n        <td>\r\n        <button data-id=\"${id}\" class=\"boton-ver\">Ver</button>\r\n        </td>\r\n        `\r\n        tabla.appendChild(tr);\r\n        idAnterior = id;\r\n    })\r\n    \r\n    evento_botones_pedidos_action();\r\n}\r\n\r\nfunction evento_botones_pedidos_action(){\r\n    document.querySelectorAll('.boton-ver').forEach(boton=>{\r\n        boton.addEventListener('click',mostrar_ver_pedido)\r\n    })\r\n    document.querySelectorAll('[data-estado]').forEach(elemento=>{\r\n        elemento.addEventListener('dblclick', cambiar_estado)\r\n    })\r\n}\r\nasync function cambiar_estado(e){\r\n    const estado = e.target.dataset.estado;\r\n    const id = e.target.dataset.id;\r\n    const datos = new FormData();\r\n    datos.append('id',id);\r\n    datos.append('status',estado);\r\n    datos.append('fecha',filtros.fecha);\r\n    datos.append('estado',filtros.estado);\r\n    //peticion para cambiar de estado el pedido.\r\n    const url = '/api/admin/pedido/actualizar_estado';\r\n    const options = {\r\n        method: 'POST',\r\n        body: datos\r\n    }\r\n    try {\r\n        const resultado = await fetch(url,options);\r\n        const respuesta = await resultado.json()\r\n        if(respuesta.exito){\r\n            pedidos_json = respuesta.pedidos\r\n            llenarAndMostrarTablaPedidos();\r\n        }else{\r\n            console.log(respuesta);\r\n        }\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\nfunction mostrar_ver_pedido(e){\r\n    crearModal();\r\n    const idPedido = e.target.dataset.id;\r\n    const pedido = pedidos_json.find(function(target){\r\n        return target.id === idPedido;        \r\n    });\r\n\r\n    insertar_al_modal_pedido_ver(pedido);\r\n    //creamos modal\r\n    //INSERTAMOS AL MODAL\r\n\r\n}\r\nfunction insertar_al_modal_pedido_ver(pedido){\r\n\r\n    const {id, fecha, status, nombre, email, telefono, direccion,\r\n        informacion_adicional,total,metodo_pago, cedula\r\n    } = pedido\r\n    const modal = document.querySelector('.contenido_modal');\r\n\r\n    modal.innerHTML= `\r\n    <div class=\"producto_div pedido_div\">\r\n            <div class=\"pedido_div_uno\">\r\n                <p>ID Pedido: <span>${id}</span></p>\r\n                <p>Fecha: <span>${fecha}</span></p>\r\n                <p>Estado: <span>${status}</span></p>\r\n        \r\n            </div>\r\n            <div class=\"pedido_div_dos\">\r\n                <p>Nombre: <span>${nombre}</span></p>\r\n                <p>Correo: <span>${email}</span></p>\r\n                <p>telefono: <span>${telefono}</span></p>\r\n                <p>Cedula: <span>${cedula}</span></p>\r\n            </div>\r\n            <div class=\"div_pedido_tres\">\r\n                <p>Direccion: <span>${direccion}</span></p>\r\n            </div>\r\n            <div class=\"lista_nombre_productos\"></div>\r\n            <div> <p>Informacion Adicional: <span>${informacion_adicional}</span></p></div>\r\n            \r\n            <div class=\"div_pedido_footer\">\r\n                <p>Estado: <span>${status}</span></p>\r\n                <p>Metodo de pago: <span>${metodo_pago}</span></p>\r\n                </div>\r\n            <p>Total: <span>$${parseInt(total).toLocaleString()}</span></p>\r\n\r\n        <div class=\"producto_div_footer\">\r\n            <button class=\"boton-eliminar\" id=\"cancelar_boton\">Volver</button>\r\n        </div>\r\n    </div>\r\n    `\r\n    /* if(disponible === 1){\r\n        const optionSelected = document.getElementById('disponible');\r\n        optionSelected.setAttribute('selected')\r\n        \r\n    } */\r\n    insertar_nombre_productos(id);\r\n    const boton_cancelar = document.getElementById('cancelar_boton');\r\n    boton_cancelar.addEventListener('click', eliminarModal)\r\n}\r\nfunction insertar_nombre_productos(id){\r\n    const div = document.querySelector('.lista_nombre_productos');\r\n    const productos = pedidos_json.filter(producto=>{\r\n        /* console.log(producto.id === 1); */\r\n        return producto.id === id;\r\n    })\r\n    productos.forEach(producto=>{\r\n        const parrafo = document.createElement('P');\r\n        parrafo.innerHTML = `<span>${producto.productoNombre}</span> x${producto.productoCantidad}`\r\n        div.appendChild(parrafo);\r\n    })\r\n    /* console.log(id);\r\n    console.log(pedidos_json); */\r\n    /* console.log(productos); */\r\n\r\n}\r\n\r\n//termina pedidos\r\n\r\n//Empieza crear productos\r\nfunction mostrar_crear_producto(){\r\n    insertar_formulario_crear();\r\n    cambiarTitulo('Crear Producto')\r\n    // evento para crear producto\r\n    document.querySelector('.formulario').addEventListener('submit', evento_formulario_crear)\r\n}\r\nasync function evento_formulario_crear(event){\r\n    event.preventDefault();\r\n    const formData = new FormData(event.target);\r\n        /* const prueba = [...formData];\r\n        console.log(prueba);\r\n        return; */\r\n    //Si no esta vacio, entonces hacemos fetch para actualizar.\r\n    try {\r\n\r\n        const url = `${location.origin}/api/admin/crear_producto`;\r\n        const options = {\r\n            method: 'post',\r\n            body: formData\r\n        }\r\n        crear_alerta_de_cargando();\r\n        const resultado = await fetch(url, options);\r\n        const respuesta = await resultado.json();\r\n        eliminar_alerta_de_cargando();\r\n        if(respuesta.resultado){\r\n            Swal.fire({\r\n                title: \"Buen trabajo!\",\r\n                text: `${respuesta.mensaje}`,\r\n                icon: \"success\",\r\n                fontsize: '5rem',\r\n                }).then(mostrarProductos)\r\n        }else{\r\n            console.log(respuesta);\r\n            const divRespuesta = document.getElementById('mensaje_error')\r\n            divRespuesta.innerHTML = ``;\r\n            respuesta.alertas.forEach(alerta=>{\r\n                const parrafo = document.createElement('P')\r\n                parrafo.textContent = alerta;\r\n                divRespuesta.appendChild(parrafo);\r\n            })\r\n            /* divRespuesta.innerHTML = `\r\n            \r\n            <p>${respuesta.alertas[0]}</p>\r\n            ` */\r\n        }\r\n        \r\n\r\n        \r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\nfunction insertar_formulario_crear(){\r\n    const contenido = document.querySelector('.contenido')\r\n    contenido.innerHTML = `\r\n     <form class=\"producto_div formulario crear_producto\" id=\"formulario\" enctype=\"multipart/form-data\">\r\n                <div class=\"informacion_producto \">\r\n                    <label htmlFor=\"nombre_editar\">Nombre: <input name=\"nombre\" id=\"nombre_editar\" type=\"text\" /></label>\r\n                    <label >Precio: <input name=\"precio\" id=\"precio_editar\" type=\"text\"/></label>\r\n                    <label htmlFor=\"\">\r\n                    Disponible:\r\n                    <select id=\"select_disponible\" name=\"disponible\">\r\n                        <option value=\"1\">Si</option>\r\n                        <option value=\"0\">No</option>\r\n                    </select>\r\n                    </label>\r\n                    <label htmlFor=\"\">Tamaño: <input type=\"text\" name=\"size\" /></label>\r\n                </div>\r\n           \r\n            <div class=\"div_producto_dos\">\r\n                <input type=\"file\" name=\"imagen\" />\r\n                 <label for=\"descripcion\" >Descripcion:</label>\r\n                  <textarea name=\"descripcion\" id=\"descripcion\" placeholder=\"Escribe la descripcion\" ></textarea>\r\n            </div>\r\n        <div id=\"mensaje_error\"></div>\r\n        <div class=\"producto_div_footer\">\r\n            <input type=\"submit\" value=\"Crear producto\" id=\"crear_producto\" class=\"boton-ver\" />\r\n            \r\n        </div>\r\n    </form>\r\n    `\r\n\r\n}\r\n\r\n//Termina crear productos\r\n\r\n//Empieza Productos\r\n\r\nfunction evento_botones_action(){\r\n    document.querySelectorAll('.boton-editar').forEach(boton=>{\r\n        boton.addEventListener('click', mostrar_editar_producto)\r\n    });\r\n    document.querySelectorAll('.boton-ver').forEach(boton=>{\r\n        boton.addEventListener('click', mostrar_ver_producto)\r\n    })\r\n    document.querySelectorAll('.boton-eliminar').forEach(boton=>{\r\n        boton.addEventListener('click', eliminar_producto)\r\n    })\r\n    \r\n}\r\n    //Empiza eliminar\r\n        //Realizar un fetch post, para eliminar un producto.\r\nasync function eliminar_producto(event){\r\n    const id = event.target.dataset.id;\r\n    const data = {\r\n        id: id\r\n    }\r\n    const url = '/api/admin/eliminar_producto';\r\n    try {\r\n        const options = {\r\n            method: 'POST',\r\n            body: JSON.stringify(data)\r\n        }\r\n        const resultado = await fetch(url, options);\r\n        const respuesta = await resultado.json();\r\n        if(respuesta.resultado){\r\n            Swal.fire({\r\n                title: \"Buen trabajo!\",\r\n                text: `${respuesta.mensaje}`,\r\n                icon: \"success\",\r\n                fontsize: '5rem',\r\n              }).then(mostrarProductos)\r\n        }else{\r\n            Swal.fire({\r\n                title: \"Error!\",\r\n                text: `${respuesta.mensaje}`,\r\n                icon: \"error\",\r\n                fontsize: '5rem',\r\n              })\r\n        }\r\n\r\n\r\n        \r\n    } catch (error) {\r\n        \r\n    }\r\n    //obtener id del producto a eliminar\r\n    //Enviar fetch\r\n    //si respuesta es true, actualizar productos.\r\n    //Si es falso, mostrar alerta de error.\r\n\r\n} \r\n    //Termina eliminar\r\n\r\n    //Empieza ver\r\nfunction mostrar_ver_producto(e){\r\n    const idProducto = e.target.dataset.id;\r\n    const producto = productos_json.find(function(target){\r\n        return target.id === idProducto;        \r\n    });\r\n\r\n    crearModal();\r\n    insertar_al_modal_producto_ver(producto);\r\n}\r\nfunction insertar_al_modal_producto_ver(producto){\r\n    const {descripcion, disponible, id, imagen, nombre, precio, size} = producto\r\n    const modal = document.querySelector('.contenido_modal');\r\n    modal.innerHTML= `\r\n    <div class=\"producto_div\">\r\n            <div class=\"div_producto_uno\">\r\n                <div class=\"imagen_producto_div\">\r\n                    <img src=\"/img/productos/${imagen}\" alt=\"imagenProducto\" />\r\n                    \r\n                </div>\r\n                <div class=\"informacion_producto\">\r\n                    <p >ID: <span>${id}</span></p>\r\n                    <p>Nombre: <span>${nombre}</span></p>\r\n                    <p>Precio: <span>${precio}</span></p>\r\n                    <p>Tamaño: <span>${size}</span></p>\r\n                    <label htmlFor=\"\">\r\n                    Disponible:\r\n                    <select disabled id=\"select_disponible\" name=\"disponible\">\r\n                        <option value=\"1\">Si</option>\r\n                        <option value=\"0\">No</option>\r\n                    </select>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class=\"div_producto_dos\">\r\n                 <p for=\"descripcion\" ><span>Descripcion:</span></p>\r\n                  <textarea name=\"descripcion\" id=\"descripcion\" disabled>${descripcion}</textarea>\r\n            </div>\r\n        <div class=\"producto_div_footer\">\r\n            <button class=\"boton-eliminar\" id=\"cancelar_boton\">Volver</button>\r\n        </div>\r\n    </div>\r\n    `\r\n    /* if(disponible === 1){\r\n        const optionSelected = document.getElementById('disponible');\r\n        optionSelected.setAttribute('selected')\r\n        \r\n    } */\r\n   const select = document.getElementById('select_disponible');\r\n   select.value = disponible;\r\n    const boton_cancelar = document.getElementById('cancelar_boton');\r\n    boton_cancelar.addEventListener('click', eliminarModal)\r\n}\r\n    //Termina ver\r\n\r\n    //Empieza editar\r\nfunction mostrarProductos(){\r\n    cambiarTitulo('Productos')\r\n    crearTabla(['Imagen','Nombre','Precio','Actions']);\r\n    solicitud_get_por_url('/api/admin/get_cuadros_where_no_deleted')\r\n    .then(llenarAndMostrarTablaProductos);\r\n    //Crear tabla para mostrar productos.\r\n    //Solicitar informacion de los productos.\r\n    //Insertar la informacion de los productos a la tabla\r\n    //Mostrar la tabla creada en pantalla\r\n    //crear evento al boton editar\r\n    //crear evento al boton ver\r\n    //crear evento al boton eliminar.\r\n}\r\nfunction cambiarTitulo(titulo){\r\n    const tituloDiv = document.querySelector('.titulo_app');\r\n    tituloDiv.innerHTML = `<h1>${titulo}</h1>`\r\n}\r\nfunction crearTabla(args = []){\r\n    const contenido = document.querySelector('.contenido')\r\n    contenido.innerHTML = `\r\n    <table class=\"tablaResumen id=\"tabla\">\r\n    <thead>\r\n            <tr class=\"trHead\">\r\n                \r\n            </tr>\r\n        </thead>\r\n        <tbody id=\"tbody\">\r\n        \r\n        </tbody>\r\n    </table>\r\n    `\r\n    const trHead = document.querySelector('.trHead');\r\n    args.forEach(mensaje=>{\r\n        const td = document.createElement('TD');\r\n        td.textContent = mensaje;\r\n        trHead.appendChild(td);\r\n    })\r\n\r\n\r\n}\r\nfunction llenarAndMostrarTablaProductos(datos){\r\n    const tabla = document.getElementById('tbody');\r\n    productos_json = datos;\r\n    datos.forEach(producto=>{\r\n        const {descripcion, disponible, id, imagen, nombre, precio, size} = producto;\r\n        const tr = document.createElement('TR');\r\n        /* const td = document.createElement('TD'); */\r\n        tr.innerHTML = `\r\n        <td><img src=\"/img/productos/${imagen}\" alt=\"imagenProducto\" /></td>\r\n        <td><p>${nombre}</p></td>\r\n        <td><p>$<span>${parseInt(precio).toLocaleString()}</span></p></td>\r\n        <td>\r\n            <div class=\"actions\">\r\n                <button data-id=\"${id}\" class=\"boton-editar\">Editar</button>\r\n                <button data-id=\"${id}\" class=\"boton-ver\">Ver</button>\r\n                <button data-id=\"${id}\" class=\"boton-eliminar\">Eliminar</button>\r\n            </div>\r\n        </td>\r\n        `\r\n        tabla.appendChild(tr);\r\n\r\n    })\r\n    evento_botones_action();\r\n}\r\nasync function solicitud_get_por_url(url){\r\n\r\n    try {\r\n        /* url = 'http://localhost:3000/api/cuadros/getCuadros'; */\r\n        const resultado = await fetch(url);\r\n        const respuesta = await resultado.json();\r\n        return respuesta;\r\n        \r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\nfunction mostrar_editar_producto(e){\r\n    const idProducto =e.target.dataset.id;\r\n    const producto = productos_json.find(function(target){\r\n        return target.id === idProducto;        \r\n    });\r\n\r\n    crearModal();\r\n    insertar_al_modal_producto(producto);\r\n    //crear evento submit para el formulario.\r\n    document.querySelector('.formulario').addEventListener('submit', evento_formulario_actualizar)\r\n        \r\n}\r\n\r\nasync function evento_formulario_actualizar(event){\r\n   /*  const datos = capturar_y_verificar_datos_de_formulario(event); */\r\n    //Si algun valor de un input es vacio entonces:\r\n        /* if(!datos){\r\n            const mensaje_div = document.getElementById('mensaje_error');\r\n            const mensajeAnterior = mensaje_div.firstChild;\r\n            if(mensajeAnterior) mensajeAnterior.remove();\r\n            const mensaje = document.createElement('P');\r\n            mensaje.textContent = 'Porfavor rellena todos los campos.'\r\n            mensaje_div.appendChild(mensaje);\r\n            return; \r\n        }  */\r\n            event.preventDefault();\r\n            const formData = new FormData(event.target);\r\n            /* const prueba = [...formData];\r\n            console.log(prueba);\r\n            return; */\r\n\r\n        //Si no esta vacio, entonces hacemos fetch para actualizar.\r\n        try {\r\n\r\n            /* const json = JSON.stringify(datos); */\r\n\r\n            const url = `${location.origin}/api/admin/actualizar_producto`;\r\n            const options = {\r\n                method: 'post',\r\n                body: formData\r\n            }\r\n            crear_alerta_de_cargando();\r\n            const resultado = await fetch(url, options);\r\n            const respuesta = await resultado.json();\r\n            eliminar_alerta_de_cargando();\r\n            if(respuesta.resultado){\r\n                Swal.fire({\r\n                    title: \"Buen trabajo!\",\r\n                    text: `${respuesta.mensaje}`,\r\n                    icon: \"success\",\r\n                    fontsize: '5rem',\r\n                  }).then(eliminar_modal_and_mostrar_productos)\r\n            }else{\r\n                \r\n                const divRespuesta = document.getElementById('mensaje_error')\r\n                divRespuesta.innerHTML = ``;\r\n                respuesta.alertas.forEach(alerta=>{\r\n                    const parrafo = document.createElement('P')\r\n                    parrafo.textContent = alerta;\r\n                    divRespuesta.appendChild(parrafo);\r\n                })\r\n                /* divRespuesta.innerHTML = `\r\n                \r\n                <p>${respuesta.alertas[0]}</p>\r\n                ` */\r\n            }\r\n            \r\n\r\n            \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n        \r\n}\r\nfunction eliminar_modal_and_mostrar_productos(){\r\n    eliminarModal()\r\n    mostrarProductos()\r\n\r\n}\r\nfunction insertar_al_modal_producto(producto){\r\n    const {descripcion, disponible, id, imagen, nombre, precio, size} = producto\r\n    const modal = document.querySelector('.contenido_modal');\r\n    modal.innerHTML= `\r\n    <form class=\"producto_div formulario\" id=\"formulario\" enctype=\"multipart/form-data\">\r\n        \r\n            <div class=\"div_producto_uno\">\r\n                <div class=\"imagen_producto_div\">\r\n                    <img src=\"/img/productos/${imagen}\" alt=\"imagenProducto\" />\r\n                    \r\n                </div>\r\n                <div class=\"informacion_producto\">\r\n                    <label htmlFor=\"\">ID: ${id}</label>\r\n                    <input type=\"hidden\" name=\"id\" value=\"${id}\" />\r\n                    <label htmlFor=\"nombre_editar\">Nombre: <input name=\"nombre\" id=\"nombre_editar\" type=\"text\" value=\"${nombre}\" /></label>\r\n                    <label >Precio: <input name=\"precio\" id=\"precio_editar\" type=\"text\" value=\"${precio}\" /></label>\r\n                    <label htmlFor=\"\">\r\n                    Disponible:\r\n                    <select id=\"select_disponible\" name=\"disponible\">\r\n                        <option value=\"1\">Si</option>\r\n                        <option value=\"0\">No</option>\r\n                    </select>\r\n                    </label>\r\n                    <label htmlFor=\"\">Tamaño: <input type=\"text\" name=\"size\" value=\"${size}\" /></label>\r\n                </div>\r\n            </div>\r\n            <div class=\"div_producto_dos\">\r\n                <input type=\"file\" name=\"imagen\" value=\"${imagen}\" />\r\n                 <label for=\"descripcion\" >Descripcion:</label>\r\n                  <textarea name=\"descripcion\" id=\"descripcion\" >${descripcion}</textarea>\r\n            </div>\r\n        <div id=\"mensaje_error\"></div>\r\n        <div class=\"producto_div_footer\">\r\n            <input type=\"submit\" value=\"Actualizar Datos\" id=\"actualizar_datos\" class=\"boton-ver\" />\r\n            <button class=\"boton-eliminar\" id=\"cancelar_boton\">Cancelar</button>\r\n        </div>\r\n    </form>\r\n    `\r\n    /* if(disponible === 1){\r\n        const optionSelected = document.getElementById('disponible');\r\n        optionSelected.setAttribute('selected')\r\n        \r\n    } */\r\n   const select = document.getElementById('select_disponible');\r\n   select.value = disponible;\r\n\r\n    const boton_cancelar = document.getElementById('cancelar_boton');\r\n    boton_cancelar.addEventListener('click', eliminarModal)\r\n\r\n}\r\n\r\n\r\nfunction crearModal(){\r\n    //este codigo solo se ejecuta una vez..\r\n    const modal = document.createElement('DIV');\r\n    modal.classList.add('modal');\r\n    modal.innerHTML = `\r\n    <div class=\"contenido_modal\"></div>\r\n    `\r\n    modal.addEventListener('click', evento_para_cerrar_modal)\r\n    const body = document.querySelector('body');\r\n    body.appendChild(modal);\r\n}\r\nfunction evento_para_cerrar_modal(event){\r\n    const eventClass = event.target.closest('.producto_div')\r\n    if(!eventClass){\r\n        eliminarModal();\r\n    }\r\n}\r\nfunction eliminarModal(){\r\n    const modal = document.querySelector('.modal')\r\n    modal.remove();\r\n       \r\n}\r\n    //Termina editar\r\n\r\n//Termina productos\r\n\r\n\r\n//Resumen\r\nfunction mostrarDatosResumen(){\r\n   getDatosResumen()\r\n   .then(imprimirDatosResumen);\r\n}\r\nfunction imprimirDatosResumen(datos){\r\n    const spanNumeroPedidos = document.querySelector('#numero_pedidos span')\r\n    spanNumeroPedidos.textContent = datos.respuesta.cantidad_pedidos\r\n\r\n    const spanNumeroProductos = document.querySelector('#numero_productos span')\r\n    spanNumeroProductos.textContent = datos.respuesta.cantidad_productos\r\n\r\n    const spanNumeroUsuarios = document.querySelector('#numero_usuarios span')\r\n    spanNumeroUsuarios.textContent = datos.respuesta.cantidad_usuarios\r\n\r\n\r\n}\r\nasync function getDatosResumen(){\r\n\r\n    try {\r\n        \r\n        const url = '/api/admin/get_info_resumen'\r\n\r\n        const resultado = await fetch(url);\r\n        const $respuesta = await resultado.json();\r\n        return $respuesta;\r\n        \r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n\r\n}\r\nfunction actualizarPagina(){\r\n    location.reload();\r\n}\r\n//Termina resumen"]}